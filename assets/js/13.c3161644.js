(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{372:function(t,e,a){"use strict";a.r(e);var i=a(42),r=Object(i.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("The configuration API, accessible by only super-admin requests, is used to define dynamic configurations. Dynamic configuration is needed in situations like")]),t._v(" "),a("ul",[a("li",[t._v("RSA key pair generated automatically at boot time if not present")]),t._v(" "),a("li",[t._v("service-specific subscription confirmation request message template")])]),t._v(" "),a("h2",{attrs:{id:"model-schema"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#model-schema"}},[t._v("#")]),t._v(" Model Schema")]),t._v(" "),a("p",[t._v("The API operates on following configuration data model fields:\n"),a("table",[a("tr",[a("th",[t._v("Name")]),t._v(" "),a("th",[t._v("Attributes")])]),t._v(" "),a("tr",[a("td",[a("p",{staticClass:"name"},[t._v("id")]),t._v(" "),a("p",{staticClass:"description"},[t._v("config id")])]),t._v(" "),a("td",[a("table",[a("tr",[a("td",[t._v("type")]),a("td",[t._v("string, format depends on db")])]),t._v(" "),a("tr",[a("td",[t._v("auto-generated")]),a("td",[t._v("true")])])])])]),t._v(" "),a("tr",[a("td",[a("p",{staticClass:"name"},[t._v("name")]),t._v(" "),a("p",{staticClass:"description"},[t._v("config name")])]),t._v(" "),a("td",[a("table",[a("tr",[a("td",[t._v("type")]),a("td",[t._v("string")])]),t._v(" "),a("tr",[a("td",[t._v("required")]),a("td",[t._v("true")])])])])]),t._v(" "),a("tr",[a("td",[a("p",{staticClass:"name"},[t._v("value")]),t._v(" "),a("div",{staticClass:"description"},[t._v("config value.\n")])]),t._v(" "),a("td",[a("table",[a("tr",[a("td",[t._v("type")]),a("td",[t._v("object")])]),t._v(" "),a("tr",[a("td",[t._v("required")]),a("td",[t._v("true")])])])])]),t._v(" "),a("tr",[a("td",[a("p",{staticClass:"name"},[t._v("serviceName")]),t._v(" "),a("p",{staticClass:"description"},[t._v("name of the service the config applicable to")])]),t._v(" "),a("td",[a("table",[a("tr",[a("td",[t._v("type")]),a("td",[t._v("string")])]),t._v(" "),a("tr",[a("td",[t._v("required")]),a("td",[t._v("false")])])])])])])]),t._v(" "),a("h2",{attrs:{id:"get-configurations"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#get-configurations"}},[t._v("#")]),t._v(" Get Configurations")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("GET /configurations\n")])])]),a("ul",[a("li",[a("p",[t._v("inputs")]),t._v(" "),a("ul",[a("li",[t._v("a "),a("a",{attrs:{href:"https://loopback.io/doc/en/lb3/Querying-data.html#filters",target:"_blank",rel:"noopener noreferrer"}},[t._v("filter"),a("OutboundLink")],1),t._v(" defining fields, where, include, order, offset, and limit\n"),a("ul",[a("li",[t._v("parameter name: filter")]),t._v(" "),a("li",[t._v("required: false")]),t._v(" "),a("li",[t._v("parameter type: query")]),t._v(" "),a("li",[t._v("data type: object")])])])])]),t._v(" "),a("li",[a("p",[t._v("outcome")]),t._v(" "),a("p",[t._v("For admin request, a list of config items matching the filter; forbidden for user request")])]),t._v(" "),a("li",[a("p",[t._v("example")]),t._v(" "),a("p",[t._v("to retrieve config items with name "),a("em",[t._v("rsa")]),t._v(", run")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("~ $ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -X GET --header "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Accept: application/json'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://localhost:3000/api/configurations?filter=%7B%22where%22%3A%20%7B%22name%22%3A%22rsa%22%7D%7D'")]),t._v("\n")])])]),a("p",[t._v("the value of filter query parameter is the "),a("a",{attrs:{href:"https://loopback.io/doc/en/lb3/Querying-data.html#using-stringified-json-in-rest-queries",target:"_blank",rel:"noopener noreferrer"}},[t._v("stringified JSON"),a("OutboundLink")],1)]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"where"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rsa"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),a("h2",{attrs:{id:"create-a-configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-a-configuration"}},[t._v("#")]),t._v(" Create a Configuration")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("POST /configurations\n")])])]),a("ul",[a("li",[a("p",[t._v("inputs")]),t._v(" "),a("ul",[a("li",[t._v("an object containing configuration data model fields. At a minimum all required fields that don't have a default value must be supplied. Id field should be omitted since it's auto-generated. The API explorer only created an empty object for field "),a("em",[t._v("value")]),t._v(" but you should populate the child fields.\n"),a("ul",[a("li",[t._v("parameter name: data")]),t._v(" "),a("li",[t._v("required: true")]),t._v(" "),a("li",[t._v("parameter type: body")]),t._v(" "),a("li",[t._v("data type: object")])])])])]),t._v(" "),a("li",[a("p",[t._v("outcome")]),t._v(" "),a("p",[a("em",[t._v("NotifyBC")]),t._v(" performs following actions in sequence")]),t._v(" "),a("ol",[a("li",[t._v("if itâ€™s a user request, error is returned")]),t._v(" "),a("li",[t._v("inputs are validated. For example, required fields without default values must be populated. If validation fails, error is returned")]),t._v(" "),a("li",[t._v("if config item is "),a("em",[t._v("notification")]),t._v(" with field "),a("em",[t._v("value.rss")]),t._v(" populated, and if the field "),a("em",[t._v("value.httpHost")]),t._v(" is missing, it is generated using this request's HTTP protocol , host name and port.")]),t._v(" "),a("li",[t._v("item is saved to database")])])]),t._v(" "),a("li",[a("p",[t._v("example")]),t._v(" "),a("p",[t._v("see the cURL command on how to create a "),a("RouterLink",{attrs:{to:"/docs/configuration/#subscription-confirmation-request-template"}},[t._v("Subscription Confirmation Request Template")])],1)])]),t._v(" "),a("h2",{attrs:{id:"update-a-configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#update-a-configuration"}},[t._v("#")]),t._v(" Update a Configuration")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("PATCH /configurations/{id}\n")])])]),a("ul",[a("li",[a("p",[t._v("inputs")]),t._v(" "),a("ul",[a("li",[t._v("configuration id\n"),a("ul",[a("li",[t._v("parameter name: id")]),t._v(" "),a("li",[t._v("required: true")]),t._v(" "),a("li",[t._v("parameter type: path")]),t._v(" "),a("li",[t._v("data type: string")])])]),t._v(" "),a("li",[t._v("an object containing fields to be updated.\n"),a("ul",[a("li",[t._v("parameter name: data")]),t._v(" "),a("li",[t._v("required: true")]),t._v(" "),a("li",[t._v("parameter type: body")]),t._v(" "),a("li",[t._v("data type: object")])])])])]),t._v(" "),a("li",[a("p",[t._v("outcome")]),t._v(" "),a("p",[t._v("Similar to "),a("em",[t._v("POST")]),t._v(" except field "),a("em",[t._v("update")]),t._v(" is always updated with current timestamp.")])])]),t._v(" "),a("h2",{attrs:{id:"delete-a-configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#delete-a-configuration"}},[t._v("#")]),t._v(" Delete a Configuration")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("DELETE /configurations/{id}\n")])])]),a("ul",[a("li",[a("p",[t._v("inputs")]),t._v(" "),a("ul",[a("li",[t._v("configuration id\n"),a("ul",[a("li",[t._v("parameter name: id")]),t._v(" "),a("li",[t._v("required: true")]),t._v(" "),a("li",[t._v("parameter type: path")]),t._v(" "),a("li",[t._v("data type: string")])])])])]),t._v(" "),a("li",[a("p",[t._v("outcome")]),t._v(" "),a("p",[t._v("For admin request, delete the config item requested; forbidden for user request")])])]),t._v(" "),a("h2",{attrs:{id:"replace-a-configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#replace-a-configuration"}},[t._v("#")]),t._v(" Replace a Configuration")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("PUT /configurations/{id}\n")])])]),a("p",[t._v("This API is intended to be only used by admin web console to modify a configuration.")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("inputs")]),t._v(" "),a("ul",[a("li",[t._v("configuration id\n"),a("ul",[a("li",[t._v("parameter name: id")]),t._v(" "),a("li",[t._v("required: true")]),t._v(" "),a("li",[t._v("parameter type: path")]),t._v(" "),a("li",[t._v("data type: string")])])]),t._v(" "),a("li",[t._v("configuration data\n"),a("ul",[a("li",[t._v("parameter name: data")]),t._v(" "),a("li",[t._v("required: true")]),t._v(" "),a("li",[t._v("parameter type: body")]),t._v(" "),a("li",[t._v("data type: object")])])])])]),t._v(" "),a("li",[a("p",[t._v("outcome")]),t._v(" "),a("p",[t._v("For admin requests, replace configuration identified by "),a("em",[t._v("id")]),t._v(" with  parameter "),a("em",[t._v("data")]),t._v(" and save to database.")])])])])}),[],!1,null,null,null);e.default=r.exports}}]);